<div class="container">
  <h3>Све речи из корпуса</h3>
  <p>Време генерисања: {{poslednjiSpisak?.end_time|date:'dd.MM.yyyy. HH:mm:ss'}}</p>
  <p-tabView>
    <p-tabPanel *ngFor="let slovo of azbuka, let i=index" header="{{slovo.toUpperCase()}}">
      <p-table 
          [value]="reci[slovo]" 
          [lazy]="true"
          [dataKey]="'id'" 
          styleClass="p-datatable-sm" 
          responsiveLayout="scroll" 
          [paginator]="true"
          [rows]="100" 
          [loading]="loading"
          [totalRecords]="ukupno[slovo]"
          (onLazyLoad)="loadReci($event, slovo)"
          [showCurrentPageReport]="true">
        <ng-template pTemplate="header">
          <tr>
            <th>Лексема</th>
            <th class="w100 right">Бр. извора</th>
            <th class="w100 right">Фреквенција</th>
            <th class="w100 right">Корпус ID</th>
            <th class="w100 right">Речник ID</th>
            <th class="w100">У Речнику</th>
            <th class="w150">Статус</th>
          </tr>
          <tr>
            <th><p-columnFilter type="text" field="tekst"></p-columnFilter></th>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
            <th>
              <p-columnFilter field="in_rsj" matchMode="equals" [showMenu]="false">
                <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                  <p-dropdown [ngModel]="value" [options]="filterRecnikOptions" (onChange)="filter($event.value)" optionLabel="name" optionValue="code" placeholder="сви" [showClear]="false" [style]="{width: '80px'}" appendTo="body">
                  </p-dropdown>
                </ng-template>
              </p-columnFilter>
            </th>
            <th>
              <p-columnFilter field="status" matchMode="equals" [showMenu]="false">
                <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                  <p-dropdown [ngModel]="value" [options]="odluke" (onChange)="filter($event.value)" optionLabel="name" optionValue="code" placeholder="сви" [showClear]="false" [style]="{width: '130px'}" appendTo="body"></p-dropdown>
                </ng-template>
              </p-columnFilter>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rec>
          <tr>
            <td>{{rec.tekst}}</td>
            <td class="right">{{rec.broj_publikacija}}</td>
            <td class="right">{{rec.broj_pojavljivanja}}</td>
            <td class="right">{{rec.korpus_id}}</td>
            <td class="right">{{rec.recnik_id}}</td>
            <td class="center">{{rec.in_rsj_str}}</td>
            <td pEditableColumn class="pointer">
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <p-dropdown [options]="odluke" [(ngModel)]="rec.odluka" optionLabel="name" optionValue="code" appendTo="body" [style]="{width: '180px'}" (onChange)="onChangeStatus($event, rec)"></p-dropdown>
                </ng-template>
                <ng-template pTemplate="output">
                  {{rec.odluka_str}}
                </ng-template>
              </p-cellEditor>
            </td>
          </tr>
        </ng-template>
      </p-table>    
    </p-tabPanel>
  </p-tabView>
</div>